  <!DOCTYPE html>
  <html lang="en-US">
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <link rel="stylesheet" href = "http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

  <body>
  <div ng-app="myApp" ng-controller="userCtrl">
    <app></app>
  </div>
  </body>
  <script type="text/javascript"> 
  var app = angular.module('myApp', []);
  app.factory('RandomUser', function(){
    return {
      getdata : function(){
        var result = '';
        $.ajax({
        url: 'http://api.randomuser.me/',
        dataType: 'json',
        async: false,
        success: function(data){
          result = data.results[0].user;
        }
        });
        return result;
      }
    }
  }); 
  app.directive('usercard', ['$compile','RandomUser',function($compile, RandomUser) {
      return {
          restrict: 'E',
          link: function($scope,$element) {
            $scope.$watch('model', function(value) {
              if($scope.model !== 0){
                $scope.UserCard = RandomUser.getdata('RandomUser');
                $('#randomUserCard').children().remove();
                angular.element($('#randomUserCard')).append($compile('<div><img class ="img-circle" src = "{{UserCard.picture.medium}}"></div><div><strong>Name: </strong>{{UserCard.name.first}} {{UserCard.name.last}}</div><div><strong>User name: </strong>{{UserCard.username}}</div><div><strong>E-mail: </strong>{{UserCard.email}}</div><div><strong>Adress: </strong>{{UserCard.location.street}}, {{UserCard.location.city}}, {{UserCard.location.state}} {{UserCard.location.zip}}</div><div><strong>Cell phone number </strong>{{UserCard.cell}}</div>')($scope));
              }
            });
          }
       }
  }]);
  app.directive('app', function() {
    return {
          restrict: 'E',
          template: ' <div class = "container"><h2>Angular</h2><h2>Random user</h2><button ng-click="GetUser()" class="btn btn-success">Get New User</button><div id = "randomUserCard" class = "row"><usercard user = "User{{model}}"></usercard></div></div>',
        }
      });
  app.controller('userCtrl', function($scope) {
      $scope.model = 0;
      $scope.GetUser = function() {
        $scope.model = $scope.model +1;
      };
  });
  </script>
  </html>